"use strict";(self.webpackChunkw3social_interface=self.webpackChunkw3social_interface||[]).push([[123],{6993:(e,t,n)=>{n.d(t,{Z:()=>s});var r=n(2863),a="http://114.55.67.80:8081/w3social";const s=function(){function e(){}return e.getTagList=function(){return r.Z.get(a+"/square/moment/getTagList")},e.getPublicPermission=function(e){return r.Z.get(a+"/did/pulishcheck",{params:e})},e.getQuestion=function(e){return r.Z.get(a+"/did/getQuestion",{params:e})},e.postQuestion=function(e){return r.Z.post(a+"/did/postquestion",e)},e.getMessage=function(e){return r.Z.post(a+"/did/frzsnews",e)},e.handleMessage=function(e){return r.Z.post(a+"/did/profrzsnews",e)},e.getDidInfo=function(e){return r.Z.post(a+"/did/info",e)},e.getFriends=function(e){return r.Z.post(a+"/did/friendslist",e)},e}()},3618:(e,t,n)=>{n.d(t,{Z:()=>s});var r=n(2863),a="http://114.55.67.80:8081/w3social";const s=function(){function e(){}return e.addMoment=function(e){return r.Z.post(a+"/square/moment/addMoment",e)},e.getMomentById=function(e){return r.Z.get(a+"/square/moment/getMomentById",{params:e})},e.getTagList=function(){return r.Z.get(a+"/square/moment/getTagList")},e.likeMoment=function(e){return r.Z.get(a+"/square/moment/like",{params:e})},e.unLikeMoment=function(e){return r.Z.get(a+"/square/moment/unLike",{params:e})},e.getMomentList=function(e){return r.Z.post(a+"/square/moment/getMoment",e)},e}()},4140:(e,t,n)=>{n.d(t,{Z:()=>x});var r=n(1527),a=(n(959),n(1474)),s=n(8194),i=n(8265),l=n(1471);function o(){var e,t,n=(e=["\n  height: '30px';\n  margin-bottom: 16px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n"],t||(t=e.slice(0)),e.raw=t,e);return o=function(){return n},n}var c=(0,l.ZP)(i.ZP)({"& .MuiPaper-root":{"border-radius":"30px 30px 0 0"}}),u=(0,l.ZP)("div")({padding:"0 16px","box-sizing":"border-box"}),d=(0,l.ZP)("div")(o());const x=function(e){var t=e.isOpen,n=e.closeDrawModal,i=e.children;return(0,r.jsx)("div",{className:"flex",children:(0,r.jsx)(c,{anchor:"bottom",open:t,onClose:n,children:(0,r.jsxs)(u,{className:"pb-[30px]",children:[(0,r.jsx)(d,{onClick:n,children:(0,r.jsx)(a.Z,{edge:"start",className:"text-black mx-0 text-[32px]","aria-label":"expand",children:(0,r.jsx)(s.Z,{})})}),i]})})})}},3881:(e,t,n)=>{n.d(t,{Z:()=>c});var r=n(1527),a=n(1028),s=n(1471),i=n(2513),l=n(8521),o=(0,s.ZP)(a.Z)({});const c=function(e){var t=e.isOpen,n=e.options,a=e.children,s=void 0===a?null:a,c=(e.confirm,e.handleClose),u=e.isShowExit,d=void 0===u||u;return(null==n?void 0:n.buttonText)&&(i.Z,null==n||n.buttonText),(0,r.jsxs)(o,{open:t,children:[s&&(0,r.jsx)("div",{className:"w-[300px] py-[25px] px-[15px] flex flex-col items-center",children:s})||(0,r.jsxs)("div",{className:"w-[300px] pt-[52px] pb-[27px] pl-[30px] pr-[30px] box-border flex flex-col items-center",children:[(0,r.jsx)("div",{className:"text-black text-[14px] text-center",children:null==n?void 0:n.title}),(0,r.jsx)("div",{className:"text-[#515151] text-[10px] mt-[18px] text-center",children:null==n?void 0:n.content}),(0,r.jsx)("div",{children:(null==n?void 0:n.buttonText)?i.Z:null==n?void 0:n.customButton})]}),d&&(0,r.jsx)("div",{className:"absolute right-[0] top-[0]",onClick:function(){null==c||c()},children:(0,r.jsx)(l.Z,{className:"text-[40px] p-[10px]"})})]})}},1023:(e,t,n)=>{n.d(t,{IV:()=>r,RU:()=>a});var r=10,a=86400},2470:(e,t,n)=>{n.d(t,{q:()=>r,x:()=>a});var r=[{label:"身份",name:"identify",items:[{label:"builder",value:1},{label:"投资人",value:2}]},{label:"性别",name:"sex",items:[{label:"女性",value:1},{label:"男性",value:2}]},{label:"时间",name:"time",items:[{label:"近一周",value:1},{label:"近一月",value:2}]},{label:"标签",name:"label",items:[{label:"web3er",value:1},{label:"开发者",value:2}]},{label:"年龄",name:"age"}],a={identify:0,sex:0,time:0,label:0,age:[16,65]}},7991:(e,t,n)=>{n.d(t,{Z:()=>l});var r=n(2470),a=n(5910),s=n(959);function i(){return i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i.apply(this,arguments)}const l=function(e){var t=e.onChange,n=(0,s.useState)(!1),l=n[0],o=n[1],c=(0,s.useState)(!1),u=c[0],d=c[1],x=(0,s.useState)(r.x),p=x[0],f=x[1],h=(0,s.useState)([]),m=h[0],v=h[1],g=(0,s.useState)([]),b=g[0],j=g[1];(0,s.useEffect)((function(){for(var e=[],t=Object.keys(p),n=0;n<t.length;n+=1){var r=t[n];(0,a.SF)(p[r])||e.push({name:r,value:p[r],label:(0,a.gj)(r,p[r])})}v(e)}),[p]);return{showFilter:l,setShowFilter:o,showDrawer:u,setShowDrawer:d,filter:p,handleFilterChange:function(e,t){if("CLEAR"===t)f(r.x);else if("DELETE"===t){var n="age"in e?{age:r.x.age}:e;f(i({},p,n))}else f(i({},p,e))},filterList:m,handleCloseFilterModal:function(){for(var e=[],n=0;n<m.length;n+=1){var r=m[n].label;e.push(r)}j(e),o(e.length>0),d(!1),null==t||t(p)},filterLabel:b}}},8570:(e,t,n)=>{n.d(t,{Z:()=>a});var r=n(959);const a=function(){var e=(0,r.useState)(!1),t=e[0],n=e[1];return{isOpen:t,handleOpen:function(){n(!t)}}}},3123:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Q});var r=n(1527),a=n(7991),s=n(2513),i=n(4875),l=n.n(i);const o=function(e){var t=e.onClick,n=e.className,a=e.text;return(0,r.jsx)(s.Z,{onClick:t,variant:"contained",className:l()("w-[250px] h-[38px] rounded-full bg-black text-[12px]",n),children:a})};var c=n(5107),u=n(3618),d=n(6993),x=n(6438),p=n(1202),f=n(959),h=n(3881),m=n(5100),v=n(8570),g=n(7626),b=n(4140),j=n(3812),w=n(6917),Z=(0,n(1471).ZP)(w.Z)({marginRight:"0px",marginLeft:"0px",paddingLeft:"6px",paddingRight:"6px","& .MuiTypography-root":{fontSize:"9px"}});const N=function(e){var t=e.checked,n=void 0!==t&&t,a=e.onChange,s=e.tag,i=e.index,o=void 0===i?0:i;return(0,r.jsx)(Z,{label:s,className:l()("text-[#494949] text-[9px] border border-solid rounded-full border-[#494949]",n?"border-[#0DCE71] text-[#0DCE71]":""),control:(0,r.jsx)(j.Z,{checked:n,style:{display:"none"},onChange:function(e){a(e.target.checked,o)},inputProps:{"aria-label":"controlled"}})})};function C(){return C=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},C.apply(this,arguments)}const k=function(e){var t=e.selectList,n=e.onChange,a=e.className,s=function(e,t){n(e,t||0)};return(0,r.jsx)("div",{className:a||"",children:t.map((function(e,t){return(0,r.jsx)("div",{className:"mr-[5px] mb-[5px]",children:(0,r.jsx)(N,C({},e,{onChange:s,index:t}))},t)}))})};function y(){return y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},y.apply(this,arguments)}const M=function(e){var t=e.tagList,n=e.handleChange,a=e.closeDrawModal;return(0,r.jsx)(b.Z,y({},e,{closeDrawModal:a,children:(0,r.jsx)(k,{selectList:t,onChange:n,className:"flex flex-wrap px-[30px] pb-[30px]"})}))};var D=n(5357);const L=function(e){var t=e.label,n=e.onDelete,a=e.onClick,s=e.size,i=e.deleteIcon,o=e.className;return(0,r.jsx)(D.Z,{size:s,label:t,variant:"outlined",onClick:a,onDelete:n,deleteIcon:i,className:l()("border-[#0DCE71] text-[#0DCE71] h-[18px] text-[8px]",o||"")})};var O=n(8521);const S=function(e){var t=e.preChip,n=e.tagList,a=void 0===n?[]:n,s=e.handleDelete;return(0,r.jsxs)("div",{className:"flex border-[#ccc] border-b border-x-0 border-t-0 border-solid pb-[10px]",children:[(0,r.jsxs)("div",{className:"flex-1 flex flex-wrap",children:[t,a.map((function(e,t){return e.checked&&(0,r.jsx)(L,{size:"small",label:e.tag,deleteIcon:(0,r.jsx)(O.Z,{className:"text-[#0DCE71]"}),onDelete:function(e){!function(e){s(!1,e)}(t)},className:"mr-[8px] mb-[8px]"},t)}))]}),(0,r.jsx)("div",{className:"text-[#0DCE71] w-[50px] text-[12px]",onClick:function(){s(!0)},children:"清除全部"})]})};var E=n(6934);const P=function(e){var t=e.left,n=e.right,a=e.title,s=(0,g.s0)();return(0,r.jsxs)("div",{className:"fixed h-[44px] w-full flex items-center justify-between pr-[10px] bg-white z-10",children:[t||(0,r.jsx)("div",{onClick:function(){s(-1)},className:"w-[44px] h-[44px] flex items-center justify-center",children:(0,r.jsx)(E.Z,{className:"text-[#C1C1C1] p-[8px] text-[36px]"})}),"string"===a?(0,r.jsx)("div",{className:"flex-1",children:a}):a,n||""]})};const T=function(e){var t=e.addLabel;return(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)("div",{className:"w-[18px] h-[18px] rounded-full bg-[#72F9B8] flex items-center justify-center",children:(0,r.jsx)("div",{className:"text-[16px] font-bold",children:"#"})}),(0,r.jsx)("div",{className:"ml-[18px] mr-[5px] text-[12px] text-black",onClick:t,children:"添加标签"}),(0,r.jsx)("div",{})]})};var q,F=n(2270),z=n.n(F),I=n(9948);function R(){return R=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},R.apply(this,arguments)}const A=function(e){return e.className,(0,f.useEffect)((function(){(q=new(z())("#editor",R({},{theme:"snow",modules:{toolbar:!1},formats:[],placeholder:"请输入....."}))).focus()}),[]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{id:"editor",className:"h-[calc(100%-100px)] overflow-auto caret-main pt-[10px] border-none"}),(0,r.jsx)("div",{className:"h-[50px] fixed z-auto bottom-[70px]",children:(0,r.jsx)("div",{className:"bg-black bg-opacity-60 w-[40px] h-[40px] rounded-[9px] flex items-center justify-center",children:(0,r.jsx)(I.Z,{className:"text-white w-[24px]"})})})]})};const Q=function(){(0,c.useQueryClient)();var e=(0,g.s0)(),t=(0,p.KO)(x.m),n=t[0],s=t[1],i=(0,v.Z)(),l=i.isOpen,b=i.handleOpen,j=(0,f.useState)(""),w=(j[0],j[1]),Z=((0,c.useQuery)("getTagList",(function(){return d.Z.getTagList()}),{onSuccess:function(e){s((function(t){return e}))},enabled:!(n.length>0)}),(0,c.useMutation)(u.Z.addMoment,{onSuccess:function(){b(),setTimeout((function(){e(-1)}),2e3)}})),N=(0,a.Z)({}),C=N.showDrawer,k=N.setShowDrawer,y=(0,r.jsx)(o,{text:"发布",className:"w-[56px] h-[23px] text-[12px]",onClick:function(){var e=q.getText();w(e);var t=[];n.forEach((function(e){e.checked&&t.push(e.id)})),0!==e.replace(/(^\s*)|(\s*$)/g,"").length?Z.mutate({moment:{content:e,tags:t}}):(0,m.ZP)("文本内容为空")}});return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(P,{title:"发布需求",right:y}),(0,r.jsxs)("div",{className:"px-[30px] h-full",children:[(0,r.jsxs)("div",{className:"pt-[74px] pb-[30px] h-full",children:[(0,r.jsx)(S,{tagList:n,handleDelete:function(e,t){s(e?function(e){return e.forEach((function(e){e.checked=!1})),e}:function(e){return e[t].checked=!1,e})},preChip:(0,r.jsx)(T,{addLabel:function(){k(!0)}})}),(0,r.jsx)(A,{})]}),(0,r.jsx)(M,{isOpen:C,tagList:n,closeDrawModal:function(){return k(!1)},handleChange:function(e,t){n[t].checked!==e&&s((function(n){return n[t].checked=e,n}))}})]}),l&&(0,r.jsx)(h.Z,{isOpen:l,isShowExit:!1,children:"发布成功，回到上一页面..."})]})}},6438:(e,t,n)=>{n.d(t,{m:()=>s,w:()=>a});var r=n(6117),a=(0,r.sn)(null),s=(0,r.sn)([])},5910:(e,t,n)=>{n.d(t,{SF:()=>i,gj:()=>s,pC:()=>l,qs:()=>o});var r=n(1023),a=n(2470),s=function(e,t){if(Array.isArray(t))return t[0]+" - "+t[1];for(var n="",r=0;r<a.q.length;r+=1){var s=a.q[r],i=s.name,l=s.items,o=void 0===l?[]:l;if(e===i)for(var c=0;c<o.length;c+=1){var u=o[c],d=u.label;if(u.value===t){n=d;break}}}return n},i=function(e){return 0===e||e[0]===a.x.age[0]&&e[1]===a.x.age[1]},l=function(e){if(!e)return"今天";var t=new Date(e),n=(new Date).getTime()-t.getTime(),a=Math.floor(n/1e3);if(a>=r.RU){var s=Math.floor(a/r.RU);return s>=14?"两周前":s>=7?"一周前":s>0?s+"天前":"今天"}var i=Math.floor(a/3600);return i>0?i+"小时前":Math.floor(a/60)>0?Math.floor(a/60)+"分钟前":"刚刚"};function o(e){for(var t="",n="",r=0;r<e.length;r++)r<5?t+=e.charAt(r):r>=e.length-4&&(n+=e.charAt(r));return t+"..."+n}}}]);