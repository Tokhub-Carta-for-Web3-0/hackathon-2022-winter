"use strict";(self.webpackChunkw3social_interface=self.webpackChunkw3social_interface||[]).push([[347],{8490:(e,t,n)=>{var r=n(489);t.Z=void 0;var i=r(n(5872)),o=n(1527),a=(0,i.default)((0,o.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"Add");t.Z=a},8521:(e,t,n)=>{var r=n(489);t.Z=void 0;var i=r(n(5872)),o=n(1527),a=(0,i.default)((0,o.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");t.Z=a},5274:(e,t,n)=>{var r=n(489);t.Z=void 0;var i=r(n(5872)),o=n(1527),a=(0,i.default)((0,o.jsx)("path",{d:"M2 20h2c.55 0 1-.45 1-1v-9c0-.55-.45-1-1-1H2v11zm19.83-7.12c.11-.25.17-.52.17-.8V11c0-1.1-.9-2-2-2h-5.5l.92-4.65c.05-.22.02-.46-.08-.66-.23-.45-.52-.86-.88-1.22L14 2 7.59 8.41C7.21 8.79 7 9.3 7 9.83v7.84C7 18.95 8.05 20 9.34 20h8.11c.7 0 1.36-.37 1.72-.97l2.66-6.15z"}),"ThumbUpAlt");t.Z=a},3999:(e,t,n)=>{var r=n(489);t.Z=void 0;var i=r(n(5872)),o=n(1527),a=(0,i.default)((0,o.jsx)("path",{d:"M21 8h-6.31l.95-4.57.03-.32c0-.41-.17-.79-.44-1.06L14.17 1 7.59 7.59C7.22 7.95 7 8.45 7 9v10c0 1.1.9 2 2 2h9c.83 0 1.54-.5 1.84-1.22l3.02-7.05c.09-.23.14-.47.14-.73v-2c0-1.1-.9-2-2-2zm0 4-3 7H9V9l4.34-4.34L12.23 10H21v2zM1 9h4v12H1z"}),"ThumbUpAltOutlined");t.Z=a},1028:(e,t,n)=>{n.d(t,{Z:()=>M});var r=n(4280),i=n(7161),o=n(959),a=n(5924),s=n(945),l=n(4736),c=n(1336),u=n(2305),d=n(2081),p=n(2868),x=n(7683),m=n(1471),f=n(4379),h=n(83);function v(e){return(0,h.Z)("MuiDialog",e)}const g=(0,f.Z)("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]);const b=(0,o.createContext)({});var Z=n(244),j=n(6533),y=n(1527);const k=["aria-describedby","aria-labelledby","BackdropComponent","BackdropProps","children","className","disableEscapeKeyDown","fullScreen","fullWidth","maxWidth","onBackdropClick","onClose","open","PaperComponent","PaperProps","scroll","TransitionComponent","transitionDuration","TransitionProps"],w=(0,m.ZP)(Z.Z,{name:"MuiDialog",slot:"Backdrop",overrides:(e,t)=>t.backdrop})({zIndex:-1}),S=(0,m.ZP)(u.Z,{name:"MuiDialog",slot:"Root",overridesResolver:(e,t)=>t.root})({"@media print":{position:"absolute !important"}}),N=(0,m.ZP)("div",{name:"MuiDialog",slot:"Container",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.container,t[`scroll${(0,c.Z)(n.scroll)}`]]}})((({ownerState:e})=>(0,i.Z)({height:"100%","@media print":{height:"auto"},outline:0},"paper"===e.scroll&&{display:"flex",justifyContent:"center",alignItems:"center"},"body"===e.scroll&&{overflowY:"auto",overflowX:"hidden",textAlign:"center","&:after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}}))),C=(0,m.ZP)(p.Z,{name:"MuiDialog",slot:"Paper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.paper,t[`scrollPaper${(0,c.Z)(n.scroll)}`],t[`paperWidth${(0,c.Z)(String(n.maxWidth))}`],n.fullWidth&&t.paperFullWidth,n.fullScreen&&t.paperFullScreen]}})((({theme:e,ownerState:t})=>(0,i.Z)({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"}},"paper"===t.scroll&&{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"},"body"===t.scroll&&{display:"inline-block",verticalAlign:"middle",textAlign:"left"},!t.maxWidth&&{maxWidth:"calc(100% - 64px)"},"xs"===t.maxWidth&&{maxWidth:"px"===e.breakpoints.unit?Math.max(e.breakpoints.values.xs,444):`${e.breakpoints.values.xs}${e.breakpoints.unit}`,[`&.${g.paperScrollBody}`]:{[e.breakpoints.down(Math.max(e.breakpoints.values.xs,444)+64)]:{maxWidth:"calc(100% - 64px)"}}},t.maxWidth&&"xs"!==t.maxWidth&&{maxWidth:`${e.breakpoints.values[t.maxWidth]}${e.breakpoints.unit}`,[`&.${g.paperScrollBody}`]:{[e.breakpoints.down(e.breakpoints.values[t.maxWidth]+64)]:{maxWidth:"calc(100% - 64px)"}}},t.fullWidth&&{width:"calc(100% - 64px)"},t.fullScreen&&{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${g.paperScrollBody}`]:{margin:0,maxWidth:"100%"}}))),M=o.forwardRef((function(e,t){const n=(0,x.Z)({props:e,name:"MuiDialog"}),u=(0,j.Z)(),m={enter:u.transitions.duration.enteringScreen,exit:u.transitions.duration.leavingScreen},{"aria-describedby":f,"aria-labelledby":h,BackdropComponent:g,BackdropProps:Z,children:M,className:P,disableEscapeKeyDown:W=!1,fullScreen:L=!1,fullWidth:D=!1,maxWidth:O="sm",onBackdropClick:I,onClose:T,open:B,PaperComponent:A=p.Z,PaperProps:$={},scroll:z="paper",TransitionComponent:E=d.Z,transitionDuration:U=m,TransitionProps:R}=n,q=(0,r.Z)(n,k),F=(0,i.Z)({},n,{disableEscapeKeyDown:W,fullScreen:L,fullWidth:D,maxWidth:O,scroll:z}),Q=(e=>{const{classes:t,scroll:n,maxWidth:r,fullWidth:i,fullScreen:o}=e,a={root:["root"],container:["container",`scroll${(0,c.Z)(n)}`],paper:["paper",`paperScroll${(0,c.Z)(n)}`,`paperWidth${(0,c.Z)(String(r))}`,i&&"paperFullWidth",o&&"paperFullScreen"]};return(0,s.Z)(a,v,t)})(F),H=o.useRef(),K=(0,l.Z)(h),J=o.useMemo((()=>({titleId:K})),[K]);return(0,y.jsx)(S,(0,i.Z)({className:(0,a.Z)(Q.root,P),closeAfterTransition:!0,components:{Backdrop:w},componentsProps:{backdrop:(0,i.Z)({transitionDuration:U,as:g},Z)},disableEscapeKeyDown:W,onClose:T,open:B,ref:t,onClick:e=>{H.current&&(H.current=null,I&&I(e),T&&T(e,"backdropClick"))},ownerState:F},q,{children:(0,y.jsx)(E,(0,i.Z)({appear:!0,in:B,timeout:U,role:"presentation"},R,{children:(0,y.jsx)(N,{className:(0,a.Z)(Q.container),onMouseDown:e=>{H.current=e.target===e.currentTarget},ownerState:F,children:(0,y.jsx)(C,(0,i.Z)({as:A,elevation:24,role:"dialog","aria-describedby":f,"aria-labelledby":K},$,{className:(0,a.Z)(Q.paper,$.className),ownerState:F,children:(0,y.jsx)(b.Provider,{value:J,children:M})}))})}))}))}))},6117:(e,t,n)=>{n.d(t,{sn:()=>o});var r=n(6858),i=n(1202);n(959);function o(e){const t=(0,i.cn)(e,((e,n,i)=>n(t,(0,r.Uy)(e(t),"function"==typeof i?i:()=>i))));return t}new WeakMap},6993:(e,t,n)=>{n.d(t,{Z:()=>o});var r=n(2863),i="http://114.55.67.80:8081/w3social";const o=function(){function e(){}return e.getTagList=function(){return r.Z.get(i+"/square/moment/getTagList")},e.getPublicPermission=function(e){return r.Z.get(i+"/did/pulishcheck",{params:e})},e.getQuestion=function(e){return r.Z.get(i+"/did/getQuestion",{params:e})},e.postQuestion=function(e){return r.Z.post(i+"/did/postquestion",e)},e.getMessage=function(e){return r.Z.post(i+"/did/frzsnews",e)},e.handleMessage=function(e){return r.Z.post(i+"/did/profrzsnews",e)},e.getDidInfo=function(e){return r.Z.post(i+"/did/info",e)},e.getFriends=function(e){return r.Z.post(i+"/did/friendslist",e)},e}()},3618:(e,t,n)=>{n.d(t,{Z:()=>o});var r=n(2863),i="http://114.55.67.80:8081/w3social";const o=function(){function e(){}return e.addMoment=function(e){return r.Z.post(i+"/square/moment/addMoment",e)},e.getMomentById=function(e){return r.Z.get(i+"/square/moment/getMomentById",{params:e})},e.getTagList=function(){return r.Z.get(i+"/square/moment/getTagList")},e.likeMoment=function(e){return r.Z.get(i+"/square/moment/like",{params:e})},e.unLikeMoment=function(e){return r.Z.get(i+"/square/moment/unLike",{params:e})},e.getMomentList=function(e){return r.Z.post(i+"/square/moment/getMoment",e)},e}()},8164:(e,t,n)=>{n.d(t,{Z:()=>a});var r=n(1527),i=n(4875),o=n.n(i);const a=function(e){var t=e.labels,n=e.type,i=function(e){void 0===e&&(e="black");var t="text-[10px] rounded-full py-[2px] border-[1px] border-solid px-[8px] ml-[6px] first:ml-[0] flex justify-center items-center";return"grey"===e?o()(t,"text-"+e+" border-current"):"black"!==e?o()(t,"bg-"+e+" text-"+e+" border-current"):o()(t,"bg-black text-white border-black")};return(0,r.jsx)("div",{className:"flex items-center",children:null==t?void 0:t.map((function(e,t){return(0,r.jsx)("span",{className:i(n),children:e},e+t)}))})}},3881:(e,t,n)=>{n.d(t,{Z:()=>c});var r=n(1527),i=n(1028),o=n(1471),a=n(2513),s=n(8521),l=(0,o.ZP)(i.Z)({});const c=function(e){var t=e.isOpen,n=e.options,i=e.children,o=void 0===i?null:i,c=(e.confirm,e.handleClose),u=e.isShowExit,d=void 0===u||u;return(null==n?void 0:n.buttonText)&&(a.Z,null==n||n.buttonText),(0,r.jsxs)(l,{open:t,children:[o&&(0,r.jsx)("div",{className:"w-[300px] py-[25px] px-[15px] flex flex-col items-center",children:o})||(0,r.jsxs)("div",{className:"w-[300px] pt-[52px] pb-[27px] pl-[30px] pr-[30px] box-border flex flex-col items-center",children:[(0,r.jsx)("div",{className:"text-black text-[14px] text-center",children:null==n?void 0:n.title}),(0,r.jsx)("div",{className:"text-[#515151] text-[10px] mt-[18px] text-center",children:null==n?void 0:n.content}),(0,r.jsx)("div",{children:(null==n?void 0:n.buttonText)?a.Z:null==n?void 0:n.customButton})]}),d&&(0,r.jsx)("div",{className:"absolute right-[0] top-[0]",onClick:function(){null==c||c()},children:(0,r.jsx)(s.Z,{className:"text-[40px] p-[10px]"})})]})}},8524:(e,t,n)=>{n.d(t,{Z:()=>o});var r=n(1527),i=(n(959),n(3231));const o=function(e){var t=e.showDid,n=void 0!==t&&t,o=e.name,a=e.identity,s=e.headSculpture;return(0,r.jsxs)("div",{className:"flex w-full",children:[(0,r.jsx)(i.Z,{src:s,className:"w-[36px] h-[36px] mr-[8px]"}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex justify-between mb-1",children:[(0,r.jsx)("span",{className:"text-black font-medium text-[14px]",children:o}),n&&(0,r.jsx)("span",{className:"rounded-full text-[10px] text-black text-opacity-50 bg-white flex justify-center items-center px-[6px] py-[2px] relative top-[4px]",children:"DID#0425"})]}),(0,r.jsx)("div",{className:"text-[10px]",children:a})]})]})}},9499:(e,t,n)=>{n.d(t,{Z:()=>c});var r=n(1527),i=n(959),o=n(8389),a=n(2794),s=n(8370);function l(){return l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l.apply(this,arguments)}const c=function(e){var t=e.hasNextPage,n=e.isNextPageLoading,c=e.listData,u=e.loadNextPage,d=e.totalElements,p=e.children,x=e.getItemList,m=e.isShowBottomTip,f=void 0===m||m,h=(0,i.useMemo)((function(){return t?c.length+1:c.length}),[c,t]),v=n?function(){}:u,g=function(e){return!t||e<c.length};return(0,r.jsx)(s.Z,{children:function(e){var t=e.height,n=e.width;return(0,r.jsx)(o.Z,{isItemLoaded:g,itemCount:h,loadMoreItems:v,children:function(e){var i=e.onItemsRendered,o=e.ref;return(0,r.jsx)(a.S_,{className:"List",height:t,itemCount:c.length,width:n,itemSize:x,ref:o,onItemsRendered:i,initialScrollOffset:20,children:function(e){var t=e.index,n=e.style;return(0,r.jsx)("div",{style:l({},n),children:g(t)?(0,r.jsxs)(r.Fragment,{children:[p(t),t===d-1&&f&&(0,r.jsx)("div",{className:"text-center pt-[10px]",children:"到底了...."})]}):(0,r.jsx)("div",{children:"loading...."})})}})}})}})}},8570:(e,t,n)=>{n.d(t,{Z:()=>i});var r=n(959);const i=function(){var e=(0,r.useState)(!1),t=e[0],n=e[1];return{isOpen:t,handleOpen:function(){n(!t)}}}},6316:(e,t,n)=>{n.r(t),n.d(t,{default:()=>B});var r=n(1527),i=n(9499),o=n(959),a=n(8570),s=n(3618),l=n(5107),c=n(6993),u=n(7293);const d=function(e){var t=e.content;return(0,r.jsxs)("div",{className:"bg-oMainColor overflow-hidden rounded-[8px] py-[6px] pl-[14px] pr-[14px] relative",children:[(0,r.jsx)("div",{className:"absolute top-[8px] bottom-[8px] left-[12px] rounded-[4px] w-[4px] bg-black"}),(0,r.jsx)("div",{className:"ml-[14px] h-[72px] overflow-clip line-clamp-3 text-ellipsis",children:t})]})};var p=n(8164);const x=function(){return(0,r.jsx)("div",{className:"flex justify-end items-center w-[80px] text-grey",children:(0,r.jsx)("span",{children:"两周前"})})};var m=n(3999),f=n(5274),h=n(8642),v=(0,n(1471).ZP)(h.Z)((function(e){e.theme;return{position:"relative","& .MuiBadge-badge":{right:-5,top:"7px",padding:"0 4px",color:"black","font-size":"14px"}}}));const g=function(e){var t=e.thumbCount,n=void 0===t?0:t,i=e.onLike,o=(e.onComment,e.isLike);return(0,r.jsx)("div",{className:"flex items-center justify-end w-[100px] text-[10px] h-[40px] mr-[10px]",children:(0,r.jsx)("div",{onClick:i,className:"h-[30px] flex items-center pl-[5px] pr-[5px]",children:(0,r.jsx)(v,{badgeContent:n||0,children:o?(0,r.jsx)(f.Z,{className:"text-fSelect text-[16px]"}):(0,r.jsx)(m.Z,{className:"text-[16px]"})})})})};var b=n(8524),Z=n(7626);const j=function(){var e=(0,Z.s0)();return{jumpToContent:function(t){e("/needDetail?id="+t)}}};function y(){return y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},y.apply(this,arguments)}const k=function(e){var t=e.onLike,n=e.onComment,i=e.nickname,o=e.identity,a=e.headSculpture,s=e.content,l=e.likes,c=e.isLike,u=e.id,m=e.tag,f={name:i,identity:o,headSculpture:a},h=j().jumpToContent,v=m?m.split("&"):[];return(0,r.jsxs)("div",{className:"border-0 border-b-[1px] border-gray-400 border-solid py-[8px] relative",children:[(0,r.jsx)("div",{className:"absolute top-4 right-0",children:(0,r.jsx)(x,{})}),(0,r.jsx)("div",{className:"flex",children:(0,r.jsx)(b.Z,y({showDid:!1},f))}),(0,r.jsx)("div",{onClick:function(){return h(u)},className:"my-[16px]",children:(0,r.jsx)(d,{content:s})}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)(p.Z,{labels:v}),(0,r.jsx)(g,{thumbCount:l,onLike:t,onComment:n,isLike:!!c})]})]})};var w=n(8490);const S=function(e){var t=e.onClick;return document.documentElement.clientWidth,(0,r.jsx)("div",{onClick:function(){t&&t()},children:(0,r.jsx)("div",{className:"fixed bottom-[100px] right-[20px] text-white bg-opacityButton w-[50px] h-[50px] rounded-full flex items-center justify-center",children:(0,r.jsx)(w.Z,{className:"text-[40px]"})})})};var N=n(3881),C=n(9347),M=n(2513);const P=n.p+"assets/7b3d302f.png";function W(){return W=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},W.apply(this,arguments)}const L=function(e){var t=e.handleClose;return(0,r.jsxs)(N.Z,W({},e,{children:[(0,r.jsx)("img",{src:P,alt:"noPermission"}),(0,r.jsx)("p",{className:"mt-[25px] text-[14px] text-[#515151]",children:"身份权限不够，请购买DID身份"}),(0,r.jsx)(C.rU,{to:"/publishNeed",children:(0,r.jsx)(M.Z,{onClick:function(){},variant:"contained",className:"mt-[20px] w-[163px] h-[36px] rounded-full bg-black text-[12px] text-white",children:"开始吧"})}),(0,r.jsx)("div",{className:"w-full mt-[10px] text-[10px] text-[#515151] py-[10px] text-right",onClick:t,children:"继续逛逛 >>"})]}))};function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function O(){return O=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},O.apply(this,arguments)}function I(e){return function(e){if(Array.isArray(e))return D(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return D(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return D(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(){var e=(0,l.useQueryClient)(),t=(0,Z.s0)(),n=(0,o.useState)(0),d=n[0],p=n[1],x=(0,a.Z)(),m=x.isOpen,f=x.handleOpen,h=(0,o.useState)([]),v=h[0],g=h[1],b=(0,o.useState)(!1),j=b[0],y=b[1],w=(0,o.useState)(0),N=w[0],C=w[1],M=((0,u.Z)().userInfo,(0,l.useQuery)(["getMomentList",d],(function(){return s.Z.getMomentList({page:d,size:10})}),{onSuccess:function(e){var t=I(v).concat(I(e.records));g(t),C(e.totalElements),t.length<e.totalElements&&y(!0)}})),P=((0,l.useMutation)(c.Z.getPublicPermission,{onSuccess:function(e){e||f()}}),(0,l.useMutation)(s.Z.likeMoment,{onSuccess:function(){e.invalidateQueries(["needTab",d])}})),W=(0,l.useMutation)(s.Z.unLikeMoment,{onSuccess:function(){e.invalidateQueries(["needTab",d])}});return(0,r.jsxs)("div",{className:"h-full squareRoot",children:[(0,r.jsx)(i.Z,{hasNextPage:j,isNextPageLoading:null==M?void 0:M.isLoading,listData:v,loadNextPage:function(){var e;v.length&&v.length<((null==M||null==(e=M.data)?void 0:e.totalElements)||0)&&p(d+1)},totalElements:N,getItemList:function(e){return e===N-1?270:230},children:function(e){return(0,r.jsx)(k,O({},v[e],{onLike:function(){!function(e,t){if(e.isLike){var n=JSON.parse(JSON.stringify(v));n[t].isLike=!1,n[t].likes=--n[t].likes,g(n),W.mutate({id:e.id})}else{var r=JSON.parse(JSON.stringify(v));r[t].isLike=!0,r[t].likes=++r[t].likes,g(r),P.mutate({id:e.id})}}(v[e],e)},onComment:function(){}}))}}),(0,r.jsx)(S,{onClick:function(){t("/publishNeed")}}),(0,r.jsx)(L,{isOpen:m,handleClose:f})]})}T.whyDidYouRender=!0;const B=T},6438:(e,t,n)=>{n.d(t,{m:()=>o,w:()=>i});var r=n(6117),i=(0,r.sn)(null),o=(0,r.sn)([])},7293:(e,t,n)=>{n.d(t,{Z:()=>c});var r=n(2863),i="http://114.55.67.80:8081/w3socialLogin";const o=function(){function e(){}return e.getUserInfo=function(){return r.Z.get(i+"/user/getUserInfo")},e.updateUserInfo=function(e){return r.Z.post(i+"/user/updateUserInfo",e)},e.logout=function(){return r.Z.get(i+"/user/logout")},e}();var a=n(5107),s=n(1202),l=n(6438);const c=function(){var e=(0,s.KO)(l.w),t=e[0],n=e[1];return{userInfo:t,GetUserInfoQuery:(0,a.useQuery)("getUserInfo",o.getUserInfo,{onSuccess:function(e){(null==e?void 0:e.id)&&n((function(t){return e}))},enabled:!(null==t?void 0:t.id)})}}}}]);